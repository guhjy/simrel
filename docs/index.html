<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulation of Multivariate Linear Model Data • simulatr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">simulatr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">

<div id="introduction" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1></div>
<p><code>Simrel</code> r-package is a versatile tool for simulation of multivariate linear model data. The package consist of four core functions – <code>simrel</code>, <code>simrel2</code>, <code>simrel_m</code> and <code>simulatr</code> for simulation and a plot function <code>plot.simulatr</code>. As the name suggests, <code>simrel</code> function is used for simulating univariate linear model data, <code>simrel2</code> simulates bivariate linear model data where user can spup} knitr::knecify the correlation between two responses with and without given <strong>X</strong>. In addition, this function allows users to get responses (<strong>y</strong>) having common relevant components.</p>
<p>An extension of <code>simrel2</code> is <code>simrel_m</code>, by which user can simulate multivariate linear model data with multiple responses. In this simulation, each response must have exclusive set of predictors and relevant predictors components. Following examples will give a clear picture of these functions. The forth function <code>simulatr</code> wraps around these function and calls them according to what type of data a user is simulating.</p>
<p>Following parameters (arguments) are used in these function,</p>
<table class="table">
<thead><tr class="header">
<th>Parameters</th>
<th>Descriptions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>n</code></td>
<td>Number of training samples</td>
</tr>
<tr class="even">
<td><code>p</code></td>
<td>Number of predictor variables</td>
</tr>
<tr class="odd">
<td><code>q</code></td>
<td>Number of relevant predictors</td>
</tr>
<tr class="even">
<td><code>relpos</code></td>
<td>Position of relevant components</td>
</tr>
<tr class="odd">
<td><code>R2</code></td>
<td>Coefficient of determinations</td>
</tr>
<tr class="even">
<td><code>rho</code></td>
<td>Correlation between two responses (only applicable on <code>simrel2</code>)</td>
</tr>
<tr class="odd">
<td><code>gamma</code></td>
<td>Decaying factor of eigenvalues of predictor matrix</td>
</tr>
<tr class="even">
<td><code>m</code></td>
<td>Number of required response vector (only applicable for <code>simrel_m</code>)</td>
</tr>
</tbody>
</table>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>Install the package from GitHub,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.pacakges("devtools")</span>
devtools::<span class="kw">install_github</span>(<span class="st">"therimalaya/simulatr"</span>)</code></pre></div>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<div id="univariate-simulation" class="section level2">
<h2 class="hasAnchor">
<a href="#univariate-simulation" class="anchor"></a>Univariate Simulation:</h2>
<p>Simulate a univariate linear model data with 100 training samples and 500 test samples having 10 predictors (<strong>X</strong>) where only 8 of them are relevant for the variation in the response vector. The population model should explain 80% of the variation present in the response. In addition, only 1st and 3rd principal components of <strong>X</strong> should be relevant for <em>y</em> and the eigenvalues of <strong>X</strong> decreases exponentially by a factor of 0.7.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(simulatr)
sim_obj &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/simulatr.html">simulatr</a></span>(
    <span class="dt">n      =</span> <span class="dv">100</span>,         <span class="co"># 100 training samples</span>
    <span class="dt">p      =</span> <span class="dv">10</span>,          <span class="co"># 10 predictor variables</span>
    <span class="dt">q      =</span> <span class="dv">8</span>,           <span class="co"># only 8 of them are relevant</span>
    <span class="dt">R2     =</span> <span class="fl">0.8</span>,         <span class="co"># 80% of variation is explained by the model</span>
    <span class="dt">relpos =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>),     <span class="co"># First and third principal components are relevant</span>
    <span class="dt">gamma  =</span> <span class="fl">0.7</span>,         <span class="co"># decay factor of eigenvalue of X is 7</span>
    <span class="dt">ntest  =</span> <span class="dv">500</span>,         <span class="co"># 500 Test observations</span>
    <span class="dt">type   =</span> <span class="st">"univariate"</span> <span class="co"># Univariate linear model data simulation</span>
)</code></pre></div>
<p>Here <code>sim_obj</code> is a object with class <code>simrel</code> and constitue of a list of simulated linear model data along with other relevant properties. Lets use <code>plot.simulatr</code> function to overview the situation,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">layout</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>))
<span class="kw"><a href="reference/plot_simulatr.html">plot_simulatr</a></span>(sim_obj)</code></pre></div>
<p><img src="figure/simrel1-plot-1.png" width="864"></p>
</div>
<div id="bivariate-simulation" class="section level2">
<h2 class="hasAnchor">
<a href="#bivariate-simulation" class="anchor"></a>Bivariate Simulation</h2>
<p>The wrapper function <code>simulatr</code> uses <code>simrel2</code> for simulating bivariate linear model data. Lets consider a situation to simulate data from bivariate distribution with 100 training and 500 test samples. The response vectors <strong>y</strong><sub>1</sub> and <strong>y</strong><sub>2</sub> have correlation of 0.8 without given <strong>X</strong> and 0.6 with given <strong>X</strong>. Among 10 total predictor variables, 5 are relevant for <strong>y</strong><sub>1</sub> and 5 are relevant for <strong>y</strong><sub>2</sub>. However 3 of them are relevant for both of them. Let the predictors explain 80% and 70% of total variation present in population of <strong>y</strong><sub>1</sub> and <strong>y</strong><sub>2</sub> respectively. In addition, let 1, 2 and 3 components are relevant for <strong>y</strong><sub>1</sub> and 3 and 4 components are relevant for <strong>y</strong><sub>2</sub>. In this case, the third component is relevant for both responses. Let the decay factor of eigenvalues of <strong>X</strong> be 0.8.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simrel2_obj &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/simulatr.html">simulatr</a></span>(
    <span class="dt">n      =</span> <span class="dv">100</span>,                       <span class="co"># 100 training samples</span>
    <span class="dt">p      =</span> <span class="dv">10</span>,                        <span class="co"># 10 predictor variables</span>
    <span class="dt">q      =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">3</span>),                <span class="co"># relevant variables for y1 and y2</span>
    <span class="dt">relpos =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>)), <span class="co"># relevant components for y1 and y2</span>
    <span class="dt">R2     =</span> <span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.7</span>),               <span class="co"># Coefficient of variation for y1 and y2</span>
    <span class="dt">rho    =</span> <span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.6</span>),               <span class="co"># correlation between y1 and y2 with and without given X</span>
    <span class="dt">gamma  =</span> <span class="fl">0.8</span>,                       <span class="co"># decay factor of eigenvalues of X</span>
    <span class="dt">ntest  =</span> <span class="dv">500</span>,                       <span class="co"># 500 test samples</span>
    <span class="dt">type   =</span> <span class="st">"bivariate"</span>
  )</code></pre></div>
<p>Lets look at the plot,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">layout</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>))
<span class="kw"><a href="reference/plot_simulatr.html">plot_simulatr</a></span>(simrel2_obj)</code></pre></div>
<p><img src="figure/simrel2_plot-1.png" width="864"></p>
</div>
<div id="multivariate-simulation" class="section level2">
<h2 class="hasAnchor">
<a href="#multivariate-simulation" class="anchor"></a>Multivariate Simulation</h2>
<p>Multivariate simulation uses <code>simrel_m</code> function and can simulate multiple responses. Lets simulate 100 training samples and 500 test samples. The simulated data has 5 responses and 15 predictors. These 5 responses spans 5 latent space out of which only 3 are related to the predictors. Lets denote them by <strong>w</strong><sub>i</sub>. Let 5, 4 and 4 predictors are relevant for response components <strong>w</strong><sub>1</sub>, <strong>w</strong><sub>1</sub> and <strong>w</strong><sub>1</sub> respectively. The position of relevant predictor components for <strong>w</strong><sub>1</sub> be 1, 2, 3; for <strong>w</strong><sub>2</sub> be 4 and 5. Similarly, predictor components 6 and 8 are relevant for <strong>w</strong><sub>3</sub>.</p>
<p>Since we need 5 response variables, we mix-up these 3 informative response components with 2 remaining uninformative components so that all simulated response contains information that <strong>X</strong> are related. Lets combine <strong>w</strong><sub>1</sub> with <strong>w</strong><sub>4</sub> and <strong>w</strong><sub>3</sub> with <strong>w</strong><sub>5</sub>. So that the predictors that are relevant for response components <strong>w</strong><sub>1</sub> will be relevant for response <strong>y</strong><sub>1</sub> and <strong>y</strong><sub>3</sub> and so on.</p>
<p>In addition to these latent space requirements, let <strong>X</strong> explains 80% variation present in <strong>w</strong><sub>1</sub>, 50% in <strong>w</strong><sub>2</sub> and 70% in <strong>w</strong><sub>3</sub>. The eigenvalues of X reduces by the factor of 0.8.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simrel_m_obj &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/simulatr.html">simulatr</a></span>(
    <span class="dt">n      =</span> <span class="dv">100</span>,                                <span class="co"># 100 training samples</span>
    <span class="dt">p      =</span> <span class="dv">15</span>,                                 <span class="co"># 15 predictor variables</span>
    <span class="dt">q      =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">4</span>),                         <span class="co"># relevant variables for w1, w2 and w3</span>
    <span class="dt">relpos =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">8</span>)), <span class="co"># relevant components for w1, w2 and y3</span>
    <span class="dt">R2     =</span> <span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>),                   <span class="co"># Coefficient of variation for w1, w2 and y3</span>
    <span class="dt">ypos   =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)),       <span class="co"># combining response components together</span>
    <span class="dt">m      =</span> <span class="dv">5</span>,                                  <span class="co"># Number of response</span>
    <span class="dt">gamma  =</span> <span class="fl">0.8</span>,                                <span class="co"># decay factor of eigenvalues of X</span>
    <span class="dt">ntest  =</span> <span class="dv">500</span>,                                <span class="co"># 500 test samples</span>
    <span class="dt">type   =</span> <span class="st">"multivariate"</span>                      <span class="co"># multivariate simulation</span>
  )</code></pre></div>
<p>Lets look at the <code>simrel</code> plot;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">layout</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>))
<span class="kw"><a href="reference/plot_simulatr.html">plot_simulatr</a></span>(simrel_m_obj)</code></pre></div>
<p><img src="figure/simrelm_plot-1.png" width="864"></p>
</div>
<div id="rstudio-addins" class="section level2">
<h2 class="hasAnchor">
<a href="#rstudio-addins" class="anchor"></a>RStudio Addins</h2>
<p>To make the process easier to use, we have created a shiny gadget as an rstudio addons. If you are using Rstuio, you can access this app from Tools &gt; Addins &gt; simulatr. But you can also access this app using <code>simulatr::app_simulatr()</code>. This will open the app in a browser from where you can choose all your parameter, see the true population parametrs you will get from the simulation. When the app is closed, it will give an command output on your R console.</p>
<div class="figure">
<img src="figure/App-Simulatr.png" alt="App-Simulatr-Screenshop"><p class="caption">App-Simulatr-Screenshop</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://mathatistics.com">Raju Rimal</a> <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/therimalaya/simulatr"><img src="https://travis-ci.com/therimalaya/simulatr.svg?token=typpys6NkDJ7vULJQyan&amp;branch=master" alt="Build Status"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://mathatistics.com">Raju Rimal</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
